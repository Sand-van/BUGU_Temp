# 项目模板

## 概念

项目模板目前至少分为下三种，对前后嵌三端的工作均有影响。

- 框架模板：用于生成文件夹框架并记录该框架下所添加的组件。

- 组件模板：本质上就是组件描述文件，用于生成组件中的代码文件。

- 编译模板：用于生成编译文件及内部内容。

项目模板在创建后会被统一管理，且每组项目模板均会分配一个唯一ID。

---

## 框架模板

### 负责内容

1. 生成文件夹框架

2. 记录添加的组件

### 文件夹框架

#### 组件

每个组件至少需要生成三个文件夹：

1. src：用于存放c文件

2. inc：用于存放h文件

3. sub：用于存放该组件所需使用的引用组件，并以此可以实现组件的嵌套。

#### 工程

每个工程至少需要生成两个文件夹：

1. Core：用于存放模板文件中添加的组件

2. User：用于存放用户在编程中添加的组件

### 添加组件

框架模板中添加的组件并不会直接生成在文件夹框架中，而是用于辅助前端快速添加组件的一种方式。

用户在前端工作时想要使用方法，需要先从公共组件库中添加需要的公共组件到个人组件库，然后再从个人组件库中找到该组件，并从中找到对应方法后进行添加。

而如果用户选择了框架模板后，该框架模板中的所有记录下的组件会全部添加到个人组件库，此功能只会在用户创建项目或引入模板的时候使用，但前端最后的描述文件不会记录这个过程，只会记录最后的添加结果。

因为这个特性，我们需要一个文件至少记录所需要的组件ID。该文件即为框架模板文件，框架模板文件为json文件，命名时需要在文件开头加上`tmpl_frame_`前缀，如`tmpl_frame_empty.json`，每个框架模板文件都对应了一个项目模板。

框架模板应该有如下的属性值：

- Author：作者昵称和ID

- Date：创建时间和最后修改时间

- TemplateName：模板名称，可为中文

- TemplateEnName：模板英文名，可选填，可为数字和英文组合，用于作为路径文件夹名等。

- Type：组件(Component)或工程(Engineering)。

- AddComponents：所有需要添加的组件ID

---

## 组件模板

组件模板本质上就是组件描述文件，关于组件描述文件的详细内容，请参考[描述文件](./描述文件.md)中针对组件描述文件的介绍，组件模板相当于组件描述文件在项目模板中的别称。

---

## 编译模板

目前已有编译系统：

- `gcc-arm-none-eabi`：针对ARM芯片的无系统gcc编译器，目前使用makefile进行编译。

- `esp-idf`：乐鑫的编译系统，很麻烦，目前使用cmake进行编译。

针对这两种编译系统，我们应该进行分别处理，关于此部分内容需要继续研究，但总体不会超过下述的内容。

### ARM（STM32）

我们有通过STM32CubeMX生成的Makefile文件，该文件经过改变可以成为一个模板，每次有新工程时，都是直接将该模板复制到指定位置，然后在对应位置添加c和h文件的路径即可。

### ESP-IDF（ESP32）

本质上和ARM同理，只是语法需要变成cmake的语法，同时因为esp-idf修改了引用路径的思路，所以对于ESP-IDF，则不需要Makefile进行辅助，直接在对应位置生成对应文件然后添加内容即可。
