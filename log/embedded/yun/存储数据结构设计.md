# 存储数据结构设计

## 用户

- 用户名
- 用户ID
- 用户项目仓库
  - 组件项目
    - 组件名：BUGU官方将至少拥有并管理有一个BUGU组件，BUGU平台的编译系统和前端界面将会对这些组件进行特殊支持，通过这些组件构成BUGU的基础框架。BUGU组件是一个概念上的组件，它本质上只是用于实现语法而在前端的展示，和普通编程语言的语言一样，用户可以看到它的存在，但是工作实现是在解析过程中完成的。BUGU组件在任何项目中都是被默认添加的。
    - 组件英文名
    - 组件ID
    - 组件简介
    - BUGU版本：制作该项目时BUGU的版本，相同数据在不同版本中可能会有不同处理方式（也不一定用得上，总之加上以防患于未然吧）
    - 组件类型：分成C组件和BUGU组件，C组件是通过直接导入C程序然后记录各函数名实现的组件，而BUGU组件则是通过BUGU平台直接原生制作的组件。
      - C组件：将C的SDK上传服务器，然后根据面向对象语法填写方法和对象的内容，应用的时候不需要生成这些组件的内容，只需要在编译文件中添加路径，同时将这些API按照规定方式填入即可。
      - BUGU组件：将BUGU解析翻译为C语言，主要需要将基础类到C的翻译规则确定下来，然后即可实现解析。
    - 组件模板：用于辅助快速添加一些基础信息，来记录该组件的一些基础特性，类似于VisualStudio中的模板。
      - 模板名
      - 模板英文名
      - 模板ID
      - 模板简介
      - 芯片
        - 芯片厂商
        - 芯片名
        - 芯片ID
        - 芯片架构
        - 引脚列表
          - 引脚功能：每个不同引脚可能有多个不同功能，不同功能存在的复用关系可能影响到移植效果。
        - 芯片网站：可以导航到官网中该芯片的网址
      - 模板组件表：组件本应该全部手动添加，但通过模板组件表可以自动添加其中记录的一系列组件，方便用户添加组件。
        - 组件ID：对其它组件项目的组件ID的引用，表示该模板中需要使用到这个组件，届时在前端会通过这个ID调用对应组件。
          - 组件设置参数：对该组件的组件设置提供自定义参数，详情见下方组件设置栏。
      - 模板对象：和组件项目中的对象一样，只是这个是存在模板中的，当打开工程后会自动添加。
      - 模板方法：和组件项目中的方法一样，只是这个是存在模板中的，当打开工程后会自动添加。
    - 组件引用列表：记录所有在本组件项目中实际引用的组件，引用的组件将会生成在项目模板中需求的位置。如果一个组件在项目中多次引用，可以只用生成一次，其余位置使用引用。
    - 类：每个组件至少有一个类，对象和方法都必须定义在类中。BUGU组件中存在一个基础类，它是所有类的父类，相当于C#的Object类，当我们创建类时，如果没有说明其继承于某一个类，则默认其继承于基础类。此外，BUGU组件下应该还至少有如下几个类，他们都继承自基础类：数据类（该类中包括了基础数据类型的定义、赋值语句、计算语句等和数据直接相关的功能）*（这里的内容未来仍然可能添加修改，这里多弄几个类主要目的是为了方便用户理解查看，在解析过程中它们都是被平等视为语法被解析）*。
      - 类名
      - 类英语名
      - 类ID
      - 类简介
      - 类权限：访问和继承规则
      - 父类ID：父类的类ID
      - 对象：类中的对象代表类的属性，本质上相当于数据的声明。
        - 对象名
        - 对象英语名
        - 对象ID
        - 对象简介
        - 类ID：用于创建该对象的类的类ID
        - 对象读权限：为对象设置读权限，定义读操作的作用域或继承规则，但不能关闭读权限，对象读权限默认为公开权限（public）。每个对象都可以为自己添加读方法。
        - 对象写权限：为对象设置写权限，定义写操作的作用域或继承规则，也可以关闭写权限，对象写权限默认为公开权限（public）。关闭写权限后对象必须设置默认值，此时其相当于一个常量，此时不能使用该对象与其子对象除构造方法外任何包含写方法的方法。当写权限开启时，系统会自动为该对象添加对应的写方法。
        - 对象默认值：为对象设置默认值就是对对象的初始化或实例化。对象当对象为只读权限时，则必须为其设置默认值。
        - 对象取值区间：考虑到一些对象的一些值可能有推荐，我们可以使用如enum的数据类型来实现，但是有些情况下这些值并不是必须的，这个时候我们可以使用一个对象取值区间来在前端进行标识。如果是数据类对象，那么取值区间可以为可选项下拉表、数值区间选择等方式实现。如果是非数据类对象，则可以对其构造方法的参数设置参数推荐区间，此部分参考下方参数推荐区间。
        - 对象是否初始化：记录对象是否已经进行了初始化。任何对象必须初始化后才可以使用，数据类对象可以直接使用值来填，非数据类对象必须使用构造方法来创建对象。
          - 如果某个对象设置了默认值，则表示其进行了初始化，且在其读写权限内所有区域均可使用。
          - 如果某对象没有设置默认值，但在对象所在类的构造方法中添加了对象的初始化语句，则同样表示其进行了初始化，且在其读写权限内所有区域均可使用。
          - 如果某对象没有设置默认值，但在外部方法或内部非构造方法中使用了该对象的初始化语句，则表示该对象在此方法中被初始化，可以在该方法中满足其读写权限的区域使用。
      - 方法：类中的方法代表类的函数，本质上相当于函数的定义，所有的逻辑功能都应该在方法中实现。只有对象才能使用方法，只有类才能创建方法。
        - 方法名
        - 方法英语名
        - 方法ID
        - 方法简介
        - 方法重载表：所有方法都拥有重载表，重载表中定义了同一个方法的不同重载。除了前面列出的几个方法基础信息外，哪怕只有一个方法，这个方法也需要通过方法重载表来管理。此外，用户在使用其他人的组件时，也可以为其方法创建重载（包括构造方法和析构方法），此重载除非提交，否则只会被单独记录在该用户自己的组件项目中而不会出现在其它同样引用了该被重载方法所在组件的用户项目中。
          - 重载ID
          - 重载简介
          - 形参表：记录了方法的形式参数，不过在BUGU中参数表的参数包括了入参和出参。参数相当于一个在方法内部使用的对象，当填入参数表后，则默认该参数进行了初始化可以在当前方法定义时使用。
            - 参数名
            - 参数英语名
            - 参数ID
            - 参数简介
            - 类对象：参数类型
            - 参数默认值：可以为参数设置默认值，与对象默认值设置方法是一样的，当对象在使用该方法时，前端界面将展示默认值，编程者可以手动进行修改。
            - 参数推荐区间：可以为参数设置推荐区间，如果是数据类，可以在该参数可以取值的所有值中选择一个区域作为推荐区间，前端页面将展示这个推荐区间甚至为其提供如下拉表等交互取值方案。如果是非数据类，则可以对参数对象的构造方法的参数表提供参数推荐区间。
            - 入参：传入参数，即C语言里面的函数参数。
            - 出参：传出参数，即C语言里面的返回值，不过我们生成C时，返回值统一为void，而出参可以有多个，使用指针传参来实现。此外可以将入参同时设置为出参，则表示直接使用指针传入，可以缩减方法运行所占用内存。
          - 逻辑表：记录了该方法定义中使用的所有方法的逻辑，其实就是C语言中函数的内部，以下写的是记录单个操作需要记录的内容（为了区别正在定义的方法和正在使用的方法，此处将所有正在使用的方法称之为操作）
            - 顺序ID：记录本操作此时位于当前方法的顺序编号
            - 确定对象：只有对象才可以使用方法，所以我们需要先确定对象。但根据对象是否已经初始化等分类，我们需要按照下述分类来分别处理，注意确定对象的分类也需要进行记录，以便于后端进行解析。
              - 已初始化对象ID：已设默认值或在构造方法中被初始化的对象，直接记录其对象ID即可。
              - 未初始化对象ID：没有默认值或在构造方法中被初始化的对象，该对象应该在当前方法中被初始化（使用构造方法）后才可以使用其它方法。当为其添加构造对象时应该修改对象是否初始化的值进行记录，如果删除其构造对象时也应该进行相应注销，对象是否初始化也可以作为该对象能够使用的方法的开关。
              - 参数ID：作为入参的对象，在定义方法时该对象是虚拟存在的，且默认已经被初始化。
            - 方法ID：上述对象的方法ID
            - 重载ID：上述方法ID的重载ID
            - 实参表：记录传入该方法的所有参数，根据参数类型是数据类还是非数据类，进行分别处理
              - 数据类：可以直接写内容（数字或字符串等），也可以传入已初始化的对象ID，如果有推荐取值区间可能使用更加推荐的写法。
              - 非数据类：只能传入非对象ID，且该对象必须已经初始化。
            - 注释
  - 工程项目：工程项目会生成main函数，最后可以被编译为二进制程序
    - 工程模板：内部可以包含组件模板，同时可以添加模板组件，其作用类似于模板对象和模板方法，但是是针对组件的。
    - 核心组件：每个工程项目创建后至少有且只有一个核心组件，它和普通组件一样，但内部包含一个核心类。
      - 核心类：每个核心工程中至少有且只有一个核心类，它和普通类一样，但内部包含一个核心方法。
        - 核心方法：每个核心类中至少有且只有一个核心方法，项目运行以核心方法作为起点。

## 注意

1. 此部分应该记录所有有可能使用到的数据，并保持长期更新。
2. 上述数据中所有英语名的存在，主要目的是为了方便结合各级ID作为文件夹名、文件名或函数、变量名，以提高可读性，但这个名称并不是必须的，如果没有这个名称，我们只有ID也仍然可以实现该功能。
3. 如果没有特殊提及，上述ID都是指的该数据针对上一级的ID编号，仅需针对上一级记录唯一即可，而当我们使用ID定位时，也需要考虑到其上级的ID，必须保证能够准确访问到对应内容。
4. 关于面向对象语法的设计可能存在一定问题，在后续测试后可能需要酌情考虑进行增删，目前语法主要模仿对象为C\#，但重点是能够至少完成BUGU到C的解析。